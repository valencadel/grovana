<%= simple_form_for @sale do |f| %>
  <div class="row">
    <div class="col-md-6">
      <%= f.input :sale_date, as: :date %>
      <%= f.input :payment_method, 
                  collection: %w[Efectivo tarjeta_credito transferencia],
                  prompt: "Seleccionar mÃ©todo de pago" %>
      <%= f.association :customer,
                       label_method: lambda { |c| "#{c.first_name} #{c.last_name}" },
                       prompt: "Seleccionar cliente" %>
    </div>
  </div>

  <div class="sale-details">
    <h3>Detalles de Productos</h3>
    <%= f.simple_fields_for :sale_details do |detail| %>
      <%= render 'sale_detail_fields', f: detail %>
    <% end %>
    
    <div class="links">
      <%= link_to_add_association 'Agregar Producto', f, :sale_details, 
          class: 'btn btn-success mt-2',
          partial: 'sale_detail_fields' %>
    </div>
  </div>

  <%= f.input :total_price %>

  <div class="form-actions mt-3">
    <%= f.button :submit, class: 'btn btn-primary' %>
    <%= link_to 'Cancelar', sales_path, class: 'btn btn-secondary' %>
  </div>
<% end %> 