<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Compras</h1>
    <%= link_to "Nueva Compra", new_purchase_path, class: "btn btn-primary" %>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Fecha de Orden</th>
        <th>Fecha de Entrega</th>
        <th>Precio Total</th>
        <th>Proveedor</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <% @purchases.each do |purchase| %>
        <tr>
          <td><%= purchase.order_date %></td>
          <td><%= purchase.expected_delivery_date %></td>
          <td><%= number_to_currency(purchase.total_price) %></td>
          <td><%= purchase.supplier.company_name %></td>
          <td class="d-flex gap-2">
            <%= link_to "Ver", purchase_path(purchase), class: "btn btn-sm btn-info" %>
            <%= link_to "Editar", edit_purchase_path(purchase), class: "btn btn-sm btn-warning" %>
            <%= link_to "Eliminar",
                purchase_path(purchase),
                data: { 
                  turbo_method: :delete,
                  turbo_confirm: "¿Estás seguro que deseas eliminar esta compra?"
                },
                class: "btn btn-sm btn-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div> 