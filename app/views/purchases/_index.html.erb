<div class="mt-4">
  <div class="sm:flex-auto">
    <h1 class="text-2xl font-semibold text-gray-900">Purchase Orders</h1>
    <p class="mt-2 text-sm text-gray-700">
      Total orders: <%= purchases.count %>
    </p>
  </div>

  <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none mb-3 flex items-center justify-end gap-3">
    <%= link_to new_purchase_path,
                class: "btn btn-sm btn-primary mb-3 rounded" do %>
      <i class="fas fa-plus mr-2"></i>New Purchase
    <% end %>

    <%= link_to purchases_path(format: :xlsx),
                class: "btn btn-sm btn-success mb-3 rounded" do %>
      <i class="fa-solid fa-download"></i> Download as Excel
    <% end %>

    <!-- Barra de bÃºsqueda -->
    <div class="relative" data-controller="supplier-search">
      <input type="text"
             placeholder="Search suppliers..."
             class="form-control px-4 py-2 w-64 rounded-lg border border-gray-300
                    shadow-sm hover:shadow
                    focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 focus:shadow-md
                    placeholder-gray-400 transition-all duration-150 ease-in-out"
             data-supplier-search-target="input"
             data-action="input->supplier-search#search keydown->supplier-search#navigate"
             autocomplete="off">

      <div data-supplier-search-target="suggestions"
           class="absolute w-full z-50 hidden mt-2 overflow-hidden bg-white rounded-lg shadow-lg
                  border border-gray-200 max-h-60 overflow-y-auto">
      </div>
    </div>
  </div>

  <!-- Tabla de purchases -->
  <table class="table">
    <thead>
      <tr>
        <th>Order Date</th>
        <th>Delivery Date</th>
        <th>Total Price</th>
        <th>Supplier</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <%= render @purchases %>
    </tbody>
  </table>
</div>
